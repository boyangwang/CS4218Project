<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>COMMToolTest.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Shell (1) (Mar 17, 2014 12:17:28 AM)</a> &gt; <a href="../../index.html" class="el_group">Shell</a> &gt; <a href="../index.html" class="el_bundle">test</a> &gt; <a href="index.html" class="el_package">sg.edu.nus.comp.cs4218.impl.extended2</a> &gt; <span class="el_source">COMMToolTest.java</span></div><h1>COMMToolTest.java</h1><pre class="source lang-java linenums">package sg.edu.nus.comp.cs4218.impl.extended2;

import static org.junit.Assert.*;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.StandardOpenOption;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import sg.edu.nus.comp.cs4218.extended2.ICommTool;
import sg.edu.nus.comp.cs4218.impl.CommandParser;
import sg.edu.nus.comp.cs4218.impl.Shell;

<span class="fc" id="L18">public class COMMToolTest {</span>
    private Shell shell;
	private ICommTool commtool;

	@Before
	/**
	 * @CORRECTED setup has to be done specific to each test
	 * @throws Exception
	 */

	public void setUp() throws Exception {
<span class="fc" id="L29">        shell = new Shell(System.in, System.out);</span>
<span class="fc" id="L30">		commtool = new CommTool(null);</span>
<span class="fc" id="L31">	}</span>

	@After
	public void tearDown() throws Exception {
<span class="fc" id="L35">		commtool = null;</span>
<span class="fc" id="L36">	}</span>

	/**
	 * @CORRECTED the help msg is copied from projecet specs
	 */
	@Test
	public void testGetHelp() {
<span class="fc" id="L43">		String result = commtool.getHelp();</span>
<span class="fc" id="L44">		assertTrue(result</span>
<span class="fc" id="L45">				.equals(&quot;comm : Compares two sorted files line by line. With no options, produce three-column output. Column one\n&quot;</span>
						+ &quot;contains lines unique to FILE1, column two contains lines unique to FILE2, and column three contains lines\n&quot;
						+ &quot;common to both files.\n\n&quot;
						+ &quot;Command Format - comm [OPTIONS] FILE1 FILE2\n&quot;
						+ &quot;FILE1 - Name of the file 1\n&quot;
						+ &quot;FILE2 - Name of the file 2\n&quot;
						+ &quot;-c : check that the input is correctly sorted, even if all input lines are pairable\n&quot;
						+ &quot;-d : do not check that the input is correctly sorted\n&quot;
						+ &quot;-help : Brief information about supported options\n&quot;));
<span class="fc" id="L54">	}</span>

	@Test
	public void compareFileEqualListTest() {
<span class="fc" id="L58">		String input1 = &quot;hello world&quot;;</span>
<span class="fc" id="L59">		String input2 = &quot;hello world&quot;;</span>
<span class="fc" id="L60">		String expected = &quot;\t\t\t\thello world\n&quot;;</span>
<span class="fc" id="L61">		String result = commtool.compareFiles(input1, input2);</span>
<span class="fc" id="L62">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L63">	}</span>

	@Test
	public void compareFilesUnequalListTest() {
<span class="fc" id="L67">		String input1 = &quot;hello world\nthis is a test\nfile\nabc&quot;;</span>
<span class="fc" id="L68">		String input2 = &quot;baby\nhello world\nfinal&quot;;</span>
<span class="fc" id="L69">		String expected = &quot;\t\tbaby\n\t\t\t\thello world\ncomm: file 2 is not in sorted order\n\t\tfinal\nthis is a test\ncomm: file 1 is not in sorted order\nfile\nabc\n&quot;;</span>
<span class="fc" id="L70">		String result = commtool.compareFiles(input1, input2);</span>
		
<span class="fc" id="L72">		assertEquals(0, expected.compareTo(result));</span>
<span class="fc" id="L73">	}</span>

	@Test
	public void compareFilesCheckSortStatusEqualListTest() {
<span class="fc" id="L77">		String input1 = &quot;hello world&quot;;</span>
<span class="fc" id="L78">		String input2 = &quot;hello world&quot;;</span>
<span class="fc" id="L79">		String expected = &quot;\t\t\t\thello world\n&quot;;</span>
<span class="fc" id="L80">		String result = commtool.compareFilesCheckSortStatus(input1, input2);</span>
<span class="fc" id="L81">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L82">	}</span>

	@Test
	public void compareFilesCheckSortStatusUnequalListTest() {
<span class="fc" id="L86">		String input1 = &quot;hello world\nthis is a test\nfile\nabc&quot;;</span>
<span class="fc" id="L87">		String input2 = &quot;baby\nhello world\nfinal&quot;;</span>
<span class="fc" id="L88">		String expected = &quot;\t\tbaby\n\t\t\t\thello world\ncomm: file 2 is not in sorted order\n&quot;;</span>
<span class="fc" id="L89">		String result = commtool.compareFilesCheckSortStatus(input1, input2);</span>
<span class="fc" id="L90">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L91">	}</span>

	@Test
	public void compareFilesDoNotCheckSortStatusEqualListTest() {
<span class="fc" id="L95">		String input1 = &quot;hello world&quot;;</span>
<span class="fc" id="L96">		String input2 = &quot;hello world&quot;;</span>
<span class="fc" id="L97">		String expected = &quot;\t\t\t\thello world\n&quot;;</span>
<span class="fc" id="L98">		String result = commtool.compareFilesDoNotCheckSortStatus(input1,</span>
<span class="fc" id="L99">				input2);</span>
<span class="fc" id="L100">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L101">	}</span>

	@Test
	public void compareFilesDoNotCheckSortStatusUnequalListTest() {
<span class="fc" id="L105">		String input1 = &quot;hello world\nthis is a test\nfile\nabc&quot;;</span>
<span class="fc" id="L106">		String input2 = &quot;baby\nhello world\nfinal&quot;;</span>
<span class="fc" id="L107">		String expected = &quot;\t\tbaby\n\t\t\t\thello world\n\t\tfinal\nthis is a test\nfile\nabc\n&quot;;</span>
<span class="fc" id="L108">		String result = commtool.compareFilesDoNotCheckSortStatus(input1,</span>
<span class="fc" id="L109">				input2);</span>
<span class="fc" id="L110">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L111">	}</span>

	@Test
	public void compareFilesOneEmptyListTest() {
<span class="fc" id="L115">		String input1 = &quot;&quot;;</span>
<span class="fc" id="L116">		String input2 = &quot;baby\nhello world\nfinal&quot;;</span>
<span class="fc" id="L117">		String expected = &quot;\t\tbaby\n\t\thello world\ncomm: file 2 is not in sorted order\n\t\tfinal\n&quot;;</span>
<span class="fc" id="L118">		String result = commtool.compareFiles(input1, input2);</span>
<span class="fc" id="L119">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L120">	}</span>

	@Test
	public void compareFilesCheckSortStatusOneEmptyListTest() {
<span class="fc" id="L124">		String input1 = &quot;&quot;;</span>
<span class="fc" id="L125">		String input2 = &quot;baby\nhello world\nfinal&quot;;</span>
<span class="fc" id="L126">		String expected = &quot;\t\tbaby\n\t\thello world\ncomm: file 2 is not in sorted order\n&quot;;</span>
<span class="fc" id="L127">		String result = commtool.compareFilesCheckSortStatus(input1, input2);</span>
<span class="fc" id="L128">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L129">	}</span>

	@Test
	public void compareFilesDoNotCheckSortStatusOneEmptyListTest() {
<span class="fc" id="L133">		String input1 = &quot;&quot;;</span>
<span class="fc" id="L134">		String input2 = &quot;baby\nhello world\nfinal&quot;;</span>
<span class="fc" id="L135">		String expected = &quot;\t\tbaby\n\t\thello world\n\t\tfinal\n&quot;;</span>

<span class="fc" id="L137">		String result = commtool.compareFilesDoNotCheckSortStatus(input1,</span>
<span class="fc" id="L138">				input2);</span>
<span class="fc" id="L139">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L140">	}</span>

	@Test
	public void compareFilesTwoEmptyListTest() {
<span class="fc" id="L144">		String input1 = &quot;&quot;;</span>
<span class="fc" id="L145">		String input2 = &quot;&quot;;</span>
<span class="fc" id="L146">		String expected = &quot;&quot;;</span>
<span class="fc" id="L147">		String result = commtool.compareFiles(input1, input2);</span>

<span class="fc" id="L149">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L150">	}</span>

	@Test
	public void compareFilesCheckSortStatusTwoEmptyListTest() {
<span class="fc" id="L154">		String input1 = &quot;&quot;;</span>
<span class="fc" id="L155">		String input2 = &quot;&quot;;</span>
<span class="fc" id="L156">		String expected = &quot;&quot;;</span>
<span class="fc" id="L157">		String result = commtool.compareFilesCheckSortStatus(input1, input2);</span>
<span class="fc" id="L158">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L159">	}</span>

	@Test
	public void compareFilesDoNotCheckSortStatusTwoEmptyListTest() {
<span class="fc" id="L163">		String input1 = &quot;&quot;;</span>
<span class="fc" id="L164">		String input2 = &quot;&quot;;</span>
<span class="fc" id="L165">		String expected = &quot;&quot;;</span>
<span class="fc" id="L166">		String result = commtool.compareFilesDoNotCheckSortStatus(input1,</span>
<span class="fc" id="L167">				input2);</span>
<span class="fc" id="L168">		assertEquals(expected.compareTo(result), 0);</span>
<span class="fc" id="L169">	}</span>
	
	/**
	 * @CORRECTED when there is no option, by default &quot;file not sorted&quot; should be printed

	 * @throws IOException
	 */
	@Test
	public void executeNoOptionTest() throws IOException {
		// Test expected behavior
		// Create tmp folder with 2 files. Execute comm with no option
<span class="fc" id="L180">		File tempFolder = Files.createTempDirectory(&quot;tempFolder&quot;).toFile();</span>
<span class="fc" id="L181">		File file1 = Files.createFile(</span>
<span class="fc" id="L182">				new File(tempFolder, &quot;tempFile1.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L183">		File file2 = Files.createFile(</span>
<span class="fc" id="L184">				new File(tempFolder, &quot;tempFile2.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L185">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L186">		Files.write(file1.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L187">		temp = &quot;baby\nhello world&quot;;</span>
<span class="fc" id="L188">		Files.write(file2.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L189">		temp = &quot;\t\tbaby\n\t\t\t\thello world\nthis is a test\ncomm: file 1 is not in sorted order\nfile&quot;;</span>
<span class="fc" id="L190">		commtool = new CommTool(</span>
<span class="fc" id="L191">				new String[] { file1.getName(), file2.getName() });</span>
<span class="fc" id="L192">		String result = commtool.execute(tempFolder, &quot; &quot; + file1.getName()</span>
<span class="fc" id="L193">				+ &quot; &quot; + file2.getName());</span>
<span class="fc" id="L194">		assertEquals(true, result.contains(temp));</span>
<span class="fc" id="L195">		Files.delete(file1.toPath());</span>
<span class="fc" id="L196">		Files.delete(file2.toPath());</span>
<span class="fc" id="L197">		Files.delete(tempFolder.toPath());</span>
<span class="fc" id="L198">	}</span>

	@Test
	public void executeOneOptionTest() throws IOException {
		// Test expected behavior
		// Create tmp folder with 2 files. Execute comm with a option
<span class="fc" id="L204">		File tempFolder = Files.createTempDirectory(&quot;tempFolder&quot;).toFile();</span>
<span class="fc" id="L205">		File file1 = Files.createFile(</span>
<span class="fc" id="L206">				new File(tempFolder, &quot;tempFile1.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L207">		File file2 = Files.createFile(</span>
<span class="fc" id="L208">				new File(tempFolder, &quot;tempFile2.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L209">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L210">		Files.write(file1.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L211">		temp = &quot;baby\nhello world&quot;;</span>
<span class="fc" id="L212">		Files.write(file2.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L213">		temp = &quot;\t\tbaby\n\t\t\t\thello world\nthis is a test\nfile\n&quot;;</span>
<span class="fc" id="L214">		commtool = (ICommTool)CommandParser.parse(&quot;comm &quot; + &quot;-d &quot; + file1.getName()</span>
<span class="fc" id="L215">				+ &quot; &quot; + file2.getName(), shell);</span>
<span class="fc" id="L216">		String result = commtool.execute(tempFolder, &quot;-d &quot; + file1.getName()</span>
<span class="fc" id="L217">				+ &quot; &quot; + file2.getName());</span>
<span class="fc" id="L218">		assertEquals(temp.compareTo(result), 0);</span>
<span class="fc" id="L219">		Files.delete(file1.toPath());</span>
<span class="fc" id="L220">		Files.delete(file2.toPath());</span>
<span class="fc" id="L221">		Files.delete(tempFolder.toPath());</span>
<span class="fc" id="L222">	}</span>

	/**
	 * @CORRECTED when there are two flags, the first one take effect
	 * @throws IOException
	 */
	@Test
	public void executeTwoOptionTest() throws IOException {
		// Test expected behavior
		// Create tmp folder with 2 files. Execute comm with two option
<span class="fc" id="L232">		File tempFolder = Files.createTempDirectory(&quot;tempFolder&quot;).toFile();</span>
<span class="fc" id="L233">		File file1 = Files.createFile(</span>
<span class="fc" id="L234">				new File(tempFolder, &quot;tempFile1.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L235">		File file2 = Files.createFile(</span>
<span class="fc" id="L236">				new File(tempFolder, &quot;tempFile2.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L237">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L238">		Files.write(file1.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L239">		temp = &quot;baby\nhello world&quot;;</span>
<span class="fc" id="L240">		Files.write(file2.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L241">		temp = &quot;\t\tbaby\n\t\t\t\thello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L242">		commtool = new CommTool(new String[] { &quot;-d&quot;, &quot;-c&quot;, file1.getName(),</span>
<span class="fc" id="L243">				file2.getName() });</span>
<span class="fc" id="L244">		String result = commtool.execute(tempFolder, &quot;-d -c &quot; + file1.getName()</span>
<span class="fc" id="L245">				+ &quot; &quot; + file2.getName());</span>
<span class="fc" id="L246">		assertEquals(true, result.contains(temp));</span>
<span class="fc" id="L247">		Files.delete(file1.toPath());</span>
<span class="fc" id="L248">		Files.delete(file2.toPath());</span>
<span class="fc" id="L249">		Files.delete(tempFolder.toPath());</span>
<span class="fc" id="L250">	}</span>

	@Test
	public void executeOptionHelpTest() {
		// Test expected behavior
		// only have help in the option, no file names
		
<span class="fc" id="L257">		commtool = (ICommTool)CommandParser.parse(&quot;comm &quot; + &quot;-help&quot;, shell);</span>
		
<span class="fc" id="L259">		String result = commtool.execute(</span>
<span class="fc" id="L260">				new File(System.getProperty(&quot;java.io.tmpdir&quot;)), &quot;-help&quot;);</span>
<span class="fc" id="L261">		assertTrue(result</span>
<span class="fc" id="L262">				.startsWith((&quot;comm : Compares two sorted files line by line. With no options, produce three-column output. Column one\n&quot;</span>
						+ &quot;contains lines unique to FILE1, column two contains lines unique to FILE2, and column three contains lines\n&quot;
						+ &quot;common to both files.\n\n&quot;
						+ &quot;Command Format - comm [OPTIONS] FILE1 FILE2\n&quot;
						+ &quot;FILE1 - Name of the file 1\n&quot;
						+ &quot;FILE2 - Name of the file 2\n&quot;
						+ &quot;-c : check that the input is correctly sorted, even if all input lines are pairable\n&quot;
						+ &quot;-d : do not check that the input is correctly sorted\n&quot;
						+ &quot;-help : Brief information about supported options\n&quot;)));

<span class="fc" id="L272">	}</span>

	@Test
	public void executeOptionsIncludeHelpTest() throws IOException {
		// Test expected behavior
		// have multiple options including help.
<span class="fc" id="L278">		File tempFolder = Files.createTempDirectory(&quot;tempFolder&quot;).toFile();</span>
<span class="fc" id="L279">		File file1 = Files.createFile(</span>
<span class="fc" id="L280">				new File(tempFolder, &quot;tempFile1.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L281">		File file2 = Files.createFile(</span>
<span class="fc" id="L282">				new File(tempFolder, &quot;tempFile2.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L283">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L284">		Files.write(file1.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L285">		temp = &quot;baby\nhello world&quot;;</span>
<span class="fc" id="L286">		Files.write(file2.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
		
<span class="fc" id="L288">		commtool = (ICommTool)CommandParser.parse(&quot;comm &quot; + &quot;-d -help -c&quot; + file1.getName() + &quot; &quot; + file2.getName(), shell);</span>
		
<span class="fc" id="L290">		String result = commtool.execute(tempFolder,</span>
<span class="fc" id="L291">				&quot;-d -help -c&quot; + file1.getName() + &quot; &quot; + file2.getName());</span>
<span class="fc" id="L292">		assertTrue(result.contains(&quot;comm : Compares two sorted files line by line. With no options, produce three-column output. Column one\n&quot;</span>
						+ &quot;contains lines unique to FILE1, column two contains lines unique to FILE2, and column three contains lines\n&quot;
						+ &quot;common to both files.\n\n&quot;
						+ &quot;Command Format - comm [OPTIONS] FILE1 FILE2\n&quot;
						+ &quot;FILE1 - Name of the file 1\n&quot;
						+ &quot;FILE2 - Name of the file 2\n&quot;
						+ &quot;-c : check that the input is correctly sorted, even if all input lines are pairable\n&quot;
						+ &quot;-d : do not check that the input is correctly sorted\n&quot;
						+ &quot;-help : Brief information about supported options\n&quot;));
<span class="fc" id="L301">		Files.delete(file1.toPath());</span>
<span class="fc" id="L302">		Files.delete(file2.toPath());</span>
<span class="fc" id="L303">		Files.delete(tempFolder.toPath());</span>
<span class="fc" id="L304">	}</span>

	/**
	 * @CORRECTED if file name contains space, must be wrapped in quotes
	 * @throws IOException
	 */
	@Test
	public void executeEmptyFileTest() throws IOException {
		// Test expected behavior
		// One of the file does not contains any string
<span class="fc" id="L314">		File tempFolder = Files.createTempDirectory(&quot;tempFolder&quot;).toFile();</span>
<span class="fc" id="L315">		File file1 = Files.createFile(</span>
<span class="fc" id="L316">				new File(tempFolder, &quot;tempFile1.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L317">		File file2 = Files.createFile(</span>
<span class="fc" id="L318">				new File(tempFolder, &quot;tempFile2.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L319">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L320">		Files.write(file1.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
		
<span class="fc" id="L322">		commtool = (ICommTool)CommandParser.parse(&quot;comm &quot; + &quot;-d -c &quot; + file1.getName()</span>
<span class="fc" id="L323">				+ &quot; &quot; + file2.getName(), shell);</span>
		
<span class="fc" id="L325">		String result = commtool.execute(tempFolder, &quot;-d -c &quot; + file1.getName()</span>
<span class="fc" id="L326">				+ &quot; &quot; + file2.getName());</span>
<span class="fc" id="L327">		temp = &quot;hello world\nthis is a test\nfile\n&quot;;</span>
<span class="fc" id="L328">		assertTrue(result.equals(temp));</span>
<span class="fc" id="L329">		Files.delete(file1.toPath());</span>
<span class="fc" id="L330">		Files.delete(file2.toPath());</span>
<span class="fc" id="L331">		Files.delete(tempFolder.toPath());</span>
<span class="fc" id="L332">	}</span>

	@Test
	public void executeInvalidOptionTest() throws IOException {
		// Error-handling
<span class="fc" id="L337">		File tempFolder = Files.createTempDirectory(&quot;tempFolder&quot;).toFile();</span>
<span class="fc" id="L338">		File file1 = Files.createFile(</span>
<span class="fc" id="L339">				new File(tempFolder, &quot;tempFile1.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L340">		File file2 = Files.createFile(</span>
<span class="fc" id="L341">				new File(tempFolder, &quot;tempFile2.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L342">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L343">		Files.write(file1.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L344">		temp = &quot;baby\nhello world&quot;;</span>
<span class="fc" id="L345">		Files.write(file2.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L346">		commtool = (ICommTool)CommandParser.parse(&quot;comm &quot; + &quot;-d -i -c &quot; + file1.getName() + &quot; &quot; + file2.getName(), shell);</span>
<span class="fc" id="L347">		String result = commtool.execute(tempFolder,</span>
<span class="fc" id="L348">				&quot;-d -i -c &quot; + file1.getName() + &quot; &quot; + file2.getName());</span>
		
<span class="fc" id="L350">		temp = &quot;Error: comm: unrecognized option '-i'\nTry 'comm -help' for more information.\n&quot;;</span>
<span class="fc" id="L351">		assertEquals(commtool.getStatusCode(), 1);</span>
		
<span class="fc" id="L353">		assertTrue(result.contains(&quot;Error: comm: unrecognized option &quot;));</span>
<span class="fc" id="L354">		assertTrue(result.contains(&quot;Try 'comm -help' for more information.\n&quot;));</span>
<span class="fc" id="L355">		Files.delete(file1.toPath());</span>
<span class="fc" id="L356">		Files.delete(file2.toPath());</span>
<span class="fc" id="L357">		Files.delete(tempFolder.toPath());</span>
<span class="fc" id="L358">	}</span>

	@Test
	public void executeInvalidFileNameTest() throws IOException {
		// Error-handling
<span class="fc" id="L363">		File tempFolder = Files.createTempDirectory(&quot;tempFolder&quot;).toFile();</span>
<span class="fc" id="L364">		File file1 = Files.createFile(</span>
<span class="fc" id="L365">				new File(tempFolder, &quot;-r tempFile1.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L366">		File file2 = Files.createFile(</span>
<span class="fc" id="L367">				new File(tempFolder, &quot;tempFile2.txt&quot;).toPath()).toFile();</span>
<span class="fc" id="L368">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L369">		Files.write(file1.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
<span class="fc" id="L370">		temp = &quot;baby\nhello world&quot;;</span>
<span class="fc" id="L371">		Files.write(file2.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
		
<span class="fc" id="L373">		commtool = (ICommTool)CommandParser.parse(&quot;comm &quot; + &quot;-d -c &quot; + file1.getName()</span>
<span class="fc" id="L374">				+ &quot; &quot; + file2.getName(), shell);</span>
		
<span class="fc" id="L376">		String result = commtool.execute(tempFolder, &quot;-d -c &quot; + file1.getName()</span>
<span class="fc" id="L377">				+ &quot; &quot; + file2.getName());</span>
<span class="fc" id="L378">		temp = &quot;Error: FILE 1 is not found&quot;;</span>
<span class="fc" id="L379">		assertTrue(result.toUpperCase().contains(&quot;ERROR&quot;));</span>
<span class="fc" id="L380">		assertEquals(commtool.getStatusCode(), 1);</span>
<span class="fc" id="L381">		Files.delete(file1.toPath());</span>
<span class="fc" id="L382">		Files.delete(file2.toPath());</span>
<span class="fc" id="L383">		Files.delete(tempFolder.toPath());</span>
<span class="fc" id="L384">	}</span>

	@Test
	public void executeSameFileNoOptionTest() throws IOException {
<span class="fc" id="L388">		File file = Files.createTempFile(&quot;temp File&quot;, &quot;.tmp&quot;).toFile();</span>
<span class="fc" id="L389">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L390">		Files.write(file.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
		
<span class="fc" id="L392">		commtool = (ICommTool)CommandParser.parse(&quot;comm \&quot;&quot; + file.getName() + &quot;\&quot; \&quot;&quot; + file.getName() + &quot;\&quot;&quot;, shell);</span>
		
<span class="fc" id="L394">		String result = commtool.execute(file.getParentFile(), file.getName()</span>
<span class="fc" id="L395">				+ &quot; &quot; + file.getName());</span>
<span class="fc" id="L396">		String expected = &quot;\t\t\t\thello world\n\t\t\t\tthis is a test\ncomm: file 1 is not in sorted order\ncomm: file 2 is not in sorted order\n\t\t\t\tfile\n&quot;;</span>
<span class="fc" id="L397">		assertEquals(result, expected);</span>
<span class="fc" id="L398">		Files.delete(file.toPath());</span>
<span class="fc" id="L399">	}</span>

	@Test
	public void executeSameFileNoCheckTest() throws IOException {
<span class="fc" id="L403">		File file = Files.createTempFile(&quot;temp File&quot;, &quot;.tmp&quot;).toFile();</span>
<span class="fc" id="L404">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L405">		Files.write(file.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>

<span class="fc" id="L407">		commtool = (ICommTool) (CommandParser.parse(&quot;comm &quot; + &quot;-d \&quot;&quot;</span>
<span class="fc" id="L408">				+ file.getName() + &quot;\&quot; \&quot;&quot; + file.getName() + &quot;\&quot;&quot;, shell));</span>

<span class="fc" id="L410">		String result = commtool.execute(file.getParentFile(),</span>
<span class="fc" id="L411">				&quot;-d &quot; + file.getName() + &quot; &quot; + file.getName());</span>
<span class="fc" id="L412">		String expected = &quot;\t\t\t\thello world\n\t\t\t\tthis is a test\n\t\t\t\tfile\n&quot;;</span>
<span class="fc" id="L413">		assertEquals(true, result.contains(expected));</span>
<span class="fc" id="L414">		Files.delete(file.toPath());</span>
<span class="fc" id="L415">	}</span>

	@Test
	public void executeSameFileCheckTest() throws IOException {
<span class="fc" id="L419">		File file = Files.createTempFile(&quot;temp File&quot;, &quot;.tmp&quot;).toFile();</span>
<span class="fc" id="L420">		String temp = &quot;hello world\nthis is a test\nfile&quot;;</span>
<span class="fc" id="L421">		Files.write(file.toPath(), temp.getBytes(), StandardOpenOption.CREATE);</span>
		
<span class="fc" id="L423">		commtool = (ICommTool)CommandParser.parse(&quot;comm &quot; + &quot;-c \&quot;&quot; + file.getName() + &quot;\&quot; \&quot;&quot; + file.getName() + &quot;\&quot;&quot;, shell);</span>
		
<span class="fc" id="L425">		String result = commtool.execute(file.getParentFile(),</span>
<span class="fc" id="L426">				&quot;-c &quot; + file.getName() + &quot; &quot; + file.getName());</span>
<span class="fc" id="L427">		String expected = &quot;\t\t\t\thello world\n\t\t\t\tthis is a test\ncomm: file 1 is not in sorted order\n&quot;;</span>
<span class="fc" id="L428">		assertEquals(result, expected);</span>
<span class="fc" id="L429">		Files.delete(file.toPath());</span>
<span class="fc" id="L430">	}</span>

	@Test
	public void executeFolderTest() throws IOException {
<span class="fc" id="L434">		File dir = Files.createTempDirectory(&quot;temp dir&quot;).toFile();</span>
<span class="fc" id="L435">		String result = commtool.execute(dir.getParentFile(),</span>
<span class="fc" id="L436">				&quot;-c &quot; + dir.getName() + &quot; &quot; + dir.getName());</span>
<span class="fc" id="L437">		assertTrue(result.toUpperCase().contains(&quot;ERROR&quot;));</span>
<span class="fc" id="L438">		assertEquals(commtool.getStatusCode(), 1);</span>
<span class="fc" id="L439">		Files.delete(dir.toPath());</span>
<span class="fc" id="L440">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.3.201306030806</span>Shell (1) (Mar 17, 2014 12:17:28 AM)</div></body></html>